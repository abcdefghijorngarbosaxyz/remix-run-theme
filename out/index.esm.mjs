import e,{createContext as t,memo as n,useContext as r,Fragment as o,useState as i,useCallback as a,useEffect as c,useMemo as l}from"react";var s=["light","dark"],m="(prefers-color-scheme: dark)",d="undefined"==typeof window,u=t(void 0),h={setTheme:function(e){},themes:[]},f=function(){var e;return null!=(e=r(u))?e:h},v=function(t){return r(u)?/*#__PURE__*/e.createElement(o,null,t.children):/*#__PURE__*/e.createElement(g,t)},y=["light","dark"],g=function(t){var n=t.forcedTheme,r=t.disableTransitionOnChange,o=void 0!==r&&r,d=t.enableSystem,h=void 0===d||d,f=t.enableColorScheme,v=void 0===f||f,g=t.storageKey,T=void 0===g?"theme":g,E=t.themes,k=void 0===E?y:E,C=t.defaultTheme,L=void 0===C?h?"system":"light":C,x=t.attribute,I=void 0===x?"data-theme":x,O=t.value,M=t.children,A=t.nonce,K=i(function(){return S(T,L)}),N=K[0],j=K[1],J=i(function(){return S(T)}),_=J[0],z=J[1],H=O?Object.values(O):k,P=a(function(e){var t=e;if(t){"system"===e&&h&&(t=w());var n,r=O?O[t]:t,i=o?b():null,a=document.documentElement;if("class"===I?((n=a.classList).remove.apply(n,H),r&&a.classList.add(r)):r?a.setAttribute(I,r):a.removeAttribute(I),v){var c=s.includes(L)?L:null,l=s.includes(t)?t:c;a.style.colorScheme=l}null==i||i()}},[]),V=a(function(e){j(e);try{localStorage.setItem(T,e)}catch(e){}},[n]),q=a(function(e){var t=w(e);z(t),"system"===N&&h&&!n&&P("system")},[N,n]);c(function(){var e=window.matchMedia(m);return e.addListener(q),q(e),function(){return e.removeListener(q)}},[q]),c(function(){var e=function(e){e.key===T&&V(e.newValue||L)};return window.addEventListener("storage",e),function(){return window.removeEventListener("storage",e)}},[V]),c(function(){P(null!=n?n:N)},[n,N]);var B=l(function(){return{theme:N,setTheme:V,forcedTheme:n,resolvedTheme:"system"===N?_:N,themes:h?[].concat(k,["system"]):k,systemTheme:h?_:void 0}},[N,V,n,_,h,k]);/*#__PURE__*/return e.createElement(u.Provider,{value:B},/*#__PURE__*/e.createElement(p,{forcedTheme:n,disableTransitionOnChange:o,enableSystem:h,enableColorScheme:v,storageKey:T,themes:k,defaultTheme:L,attribute:I,value:O,children:M,attrs:H,nonce:A}),M)},p=n(function(t){var n=t.forcedTheme,r=t.storageKey,o=t.attribute,i=t.enableSystem,a=t.enableColorScheme,c=t.defaultTheme,l=t.value,d=t.nonce,u="system"===c,h="class"===o?"var d=document.documentElement,c=d.classList;c.remove("+t.attrs.map(function(e){return"'"+e+"'"}).join(",")+");":"var d=document.documentElement,n='"+o+"',s='setAttribute';",f=a?s.includes(c)&&c?"if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'"+c+"'":"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);var r=l?l[e]:e,i=t?e+"|| ''":"'"+r+"'",c="";return a&&n&&!t&&s.includes(e)&&(c+="d.style.colorScheme = '"+e+"';"),"class"===o?c+=t||r?"c.add("+i+")":"null":r&&(c+="d[s](n,"+i+")"),c},y=n?"!function(){"+h+v(n)+"}()":i?"!function(){try{"+h+"var e=localStorage.getItem('"+r+"');if('system'===e||(!e&&"+u+")){var t='"+m+"',m=window.matchMedia(t);if(m.media!==t||m.matches){"+v("dark")+"}else{"+v("light")+"}}else if(e){"+(l?"var x="+JSON.stringify(l)+";":"")+v(l?"x[e]":"e",!0)+"}"+(u?"":"else{"+v(c,!1,!1)+"}")+f+"}catch(e){}}()":"!function(){try{"+h+"var e=localStorage.getItem('"+r+"');if(e){"+(l?"var x="+JSON.stringify(l)+";":"")+v(l?"x[e]":"e",!0)+"}else{"+v(c,!1,!1)+";}"+f+"}catch(t){}}();";/*#__PURE__*/return e.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:y}})},function(){return!0}),S=function(e,t){if(!d){var n;try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},b=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),function(){window.getComputedStyle(document.body),setTimeout(function(){document.head.removeChild(e)},1)}},w=function(e){return e||(e=window.matchMedia(m)),e.matches?"dark":"light"};export{v as ThemeProvider,f as useTheme};
